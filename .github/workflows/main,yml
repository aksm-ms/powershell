name: CI
on:
  push:
    branches: [ testing-windows ]
jobs:
  build:
    name: 'Build and test job'
    runs-on: ${{ matrix.os }}
    strategy:
        matrix:
          os: [windows-latest, ubuntu-latest]
    steps:
    - name: Azure PS login testing
      uses: azure/login@releases/v1
      with:
        creds: ${{secrets.AZURE_CREDENTIALS}}
        enable-AzPSSession: true
    - name: Running Az Powershell
      uses: azure/powershell@releases/v1
      with:
        inlineScript: |
          Get-AzVm -ResourceGroupName "TESTEAVA"
        azPSVersion: 'latest'
